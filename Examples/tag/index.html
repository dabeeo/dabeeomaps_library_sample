<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>tag sample</title>
    <link rel="stylesheet" href="styles.css">
    <style>

        .tag-container {
            z-index: 10;
            border-radius: 15px;
            outline: 1px solid gray;
            padding: 10px;
            text-align: center;
            background-color: rgba(250, 250, 250, 0.8);
        }
    </style>
</head>

<body>
    <div id='viewport' class="viewport">
        <div class="inputContainer">
            <div class="addTag">add Tag</div>
            <div class="delete">delete</div>
        </div>
    </div>
</body>
<script type="text/javascript" src='https://assets.dabeeomaps.com/upload/library/dabeeomaps-4.1.0.js'></script>
<script>
    window.onload = function () {

        const dabeeoMaps = new dabeeo.Maps();
        dabeeoMaps.getMapData({
            clientId: "75hb8YSnAokb-sZ04aDR91",
            clientSecret: "0f7ad84f160c7b3fd1849a7920af718b",
        }).then(async (mapData) => {
            const mapOption = Object.assign({});
            const mapContainer = document.getElementById('viewport');
            const map = await dabeeoMaps.showMap(mapContainer, mapOption, mapData);
            let item = null; 

            document.querySelector('.addTag').addEventListener('click', function () {
                const tag = document.createElement('div');
                tag.innerHTML = `<div class="tag-container">
                        <div class="tag-body">재직 506</div>
                        <div class="tag-body">근무 149 </div>
                        </div>`;

                const option = {
                    coordinate:{x:1000,y:1000, z:100},
                    tag: tag,
                    pos: 'LEFT',
                    floorId: 'FL-t4vqgyek3jnb8146'
                }

                item = map.tag.set(option);
            });


            document.querySelector('.delete').addEventListener('click', function () {
                // map.tag.clearAll();
                if (item)  map.tag.clear(item.id);
                item = null; 
            });
        });
    }
</script>

</html>